.trigger-slack-notification:
  stage: .post
  trigger:
    strategy: depend
    include:
      - local: .gitlab/ci/slack-notify.yml

.setup-network-certs:
  - chmod 700 $NETWORK_SETUP
  - source $NETWORK_SETUP

.default-before-script:
  before_script:
    - source .gitlab/helper_functions.sh
    - !reference [.setup-network-certs]

.default-job-settings:
  interruptible: true
  extends:
    - .default-before-script

.poetry-install:
  - section_start "poetry-install" --collapsed
  # Install Poetry
  - curl -sSL https://install.python-poetry.org | python3 - --version "${POETRY_VERSION}"
  - poetry install
  - section_end "poetry-install"


.setup-artifactory:
  - section_start "Setup Artifactory" --collapsed
  - chmod 700 ${ARTIFACTORY_SETUP_SCRIPT}
  - source ${ARTIFACTORY_SETUP_SCRIPT}
  - section_end "Setup Artifactory"


.granting_execute_permissions_on_files:
  - section_start "Granting execute permissions on files" --collapsed
  - chmod +x ./Tests/scripts/*
  - chmod +x ./Tests/Marketplace/*
  - section_end "Granting execute permissions on files"

